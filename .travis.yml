language: node_js
node_js:
  - "node"
  - "8"
services:
  - mongodb
cache:
  directories:
    - "node_modules"
env:
  - JWT_TOKEN=randomtoken7582048
  - MONGODB_URI=mongodb://localhost:27017/db_book
  - PORT=3356
before_script:
  - mkdir -p logs && touch logs/{mongodb-connection.log,error.log}
  - npm install
script:
  - npm start &
  - npm test